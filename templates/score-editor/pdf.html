{% load i18n %}

<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            @page {
            
                size: a4 landscape;
                
                @frame footer_frame {
                    -pdf-frame-content: footer_content;
                    width: 5cm; right: 1.5cm; bottom: 0cm; height: 1cm;
                }
                
                @frame header_frame {
                    -pdf-frame-content: title;
                    top: 1cm;
                    right: 1.25cm;
                    width: 3cm;
                    height: 19cm;
                    font-size: 20px;
                }
                
                @frame col1_frame {
                    right: -5cm;
                    top: 1cm;
                    height: 19cm;
                    width: 2.25cm;
                }
                
                @frame col2_frame {
                    right: -2.75cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col3_frame {
                    right: -0.5cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col4_frame {
                    right: 1.75cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col5_frame {
                    right: 4cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col6_frame {
                    right: 6.25cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col7_frame {
                    right: 8.5cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col8_frame {
                    right: 10.75cm;
                    top: 1cm;
                    width: 2cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col9_frame {
                    right: 13cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col10_frame {
                    right: 15.25cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col11_frame {
                    right: 17.5cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                
            }
            
            @page regular_template {
                size: a4 landscape;
                
                @frame footer_frame {
                    -pdf-frame-content: footer_content;
                    width: 5cm; right: 1.5cm; bottom: 0cm; height: 1cm;
                }
                
                @frame col1_frame {
                    right: 1.25cm;
                    top: 1cm;
                    height: 19cm;
                    width: 2.25cm;
                }
                
                @frame col2_frame {
                    right: 3.5cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col3_frame {
                    right: 5.75cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col4_frame {
                    right: 8cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col5_frame {
                    right: 10.25cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col6_frame {
                    right: 12.5cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col7_frame {
                    right: 14.75cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col8_frame {
                    right: 17cm;
                    top: 1cm;
                    width: 2cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col9_frame {
                    right: 19.25cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col10_frame {
                    right: 21.5cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                @frame col11_frame {
                    right: 23.75cm;
                    top: 1cm;
                    width: 2.25cm;
                    height: 19cm;
                }
                
                
            }
            
            @font-face {
                font-family: "komuso";
                src: url("{{ STATIC_ROOT }}/font/komuso-webfont.ttf");
                font-weight: normal;
                font-style: normal;
            }

            #sheet {
                width: 100%;
                height: 100%;
                /*background: green;*/
                text-align: right;
            }
            
            #title {
                font-size: 16px;
                text-align: right;
            }
            
            #footer_content {
                text-align: right;
                font-size: 14px;
            }
            
            #column1 {
                border-right: 1px dashed #CCCCCC;
            }
            
            .colonne {
                border-left: 1px dashed #CCCCCC;
                text-align: center;
                font-size: 16px;
            }
            
            .cols_numbers {
                padding-bottom: 0.5cm;
            }
            
            .note {
                font-family: "komuso";
                font-size: 36px;
            }
            
        </style>
        <link rel="stylesheet" href="{{ STATIC_ROOT }}/css/pdf.css">

    </head>
    <body>

<div id="score">
    {% for piste in partition.pistes %}
    <div class="sheet">

        <div id="title" class="empty">
            {{ partition.title.text }}
        </div>
        
        <div id="footer_content"><pdf:pagenumber> / <pdf:pagecount>
        </div>
        
        <pdf:nexttemplate name="regular_template" />
            <div style="display:none;" id="numCol{% cycle '0' '11' '22' '33' '44' '55' '66' '77' '88' '99' '110' '121' '132' '143' '154' as numPage %}"></div>
            <div style="display:none;" id="numCol{% cycle '1' '2' '3' '4' '5' '6' '7' '8' '9' '10' '11' '12' as numCol %}"></div>
            <div id="column1" class="colonne">
                <div class="cols_numbers">1</div>
                {% for note in piste.notes %}
                 {% if note.nom == 'blank' %} 
                    </div>
                    <pdf:nextframe />
                    <div style="display:none;" id="numCol{% cycle numCol %}"></div>
                     {% if numCol == "12" %}
                             </div>
                             <div style="display:none;" id="numCol{% cycle numPage %}"></div>
                             <div class="sheet">
                             <div style="display:none;" id="numCol{% cycle numCol %}"></div>
                     {% endif %}
                 
                 <div id="column{{ numCol }}" class="colonne">
                    <div class="cols_numbers">{{ numCol|add:numPage }}</div>
                 {% else %}
                    <div style="font-size:38px; font-family: 'komuso';" class="note">{{ note.nom }}</div>
                 {% endif %}
                {% endfor %}
            </div>
    </div>
    {% endfor %}

</div>
   
</body>
</html>
